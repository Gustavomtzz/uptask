!function(){function e(e){Swal.fire({icon:"error",title:"Hubo un Error",text:""+e,confirmButtonText:"Ok",confirmButtonColor:"#0891B2"})}document.querySelector("#agregar-tarea").addEventListener("click",(function(){const t=document.createElement("DIV");t.setAttribute("id","modal"),t.classList.add("modal"),t.innerHTML='\n        <form class="formulario nueva-tarea">   \n        <legend>Añade una nueva tarea </legend>\n        \n        <div class="campo">\n        \n        <label for="tarea">Tarea:</label>\n        <input type="text" name="tarea" id="tarea" placeholder="Añadir una tarea al proyecto actual..." />    \n        \n        </div>\n        \n        <div class="opciones">\n        \n        <input type="submit" class="submit-nueva-tarea" value="Añadir Tarea" />    \n        <button type="button" class="cerrar-modal" id="cerrarModal">Cancelar</button>\n        \n        </div>\n        \n        </form>       \n        ',document.querySelector("BODY").appendChild(t),t.addEventListener("click",async a=>{if(a.preventDefault(),id=a.target.getAttribute("id"),"submit"==a.target.type){const a=t.querySelector("#tarea");if(""===a.value)e("");else{valor=a.value.trim();const t=new FormData;t.append("tarea",valor),t.append("idProyecto",function(){const e=new URLSearchParams(window.location.search);return Object.fromEntries(e.entries()).id}());try{const a="/api/tarea",n=await fetch(a,{method:"POST",body:t}),r=await n.json();console.log(r),r.resultado?Swal.fire({icon:"success",title:"Tarea Creada",text:"Tu Tarea fue creada correctamente",confirmButtonText:"Ok",confirmButtonColor:"#0891B2"}).then(()=>{window.location.reload()}):"error"===r.tipo&&e(r.mensaje)}catch(t){e(t)}}}"cerrarModal"===id&&document.querySelector("#modal").remove()})})),document.addEventListener("DOMContentLoaded",(function(){!async function(){const e=await fetch("/api/tarea");!function(e){const t=document.querySelector("#contenedor-tareas"),a=document.createElement("TABLE"),n=document.createElement("TBODY");a.classList.add("listar-tareas"),a.innerHTML="\n        <thead>\n            <tr>\n                <th>Tarea</th>\n                <th>Estado</th>\n                <th>Acciones</th>\n        </tr></thead>",e.forEach(e=>{const{id:t,tarea:a,idProyecto:r,estado:o}=e,c=document.createElement("tr");c.innerHTML=`\n            <td>${a}</td>\n            <td>${o}</td>\n            <td class="acciones-tarea">\n            <a href="/api/actualizar?id=${t}">\n            <i class="fa-regular fa-pen-to-square" style="color: #F59E0B;"></i>\n            </a>  \n            <a href="/api/eliminar?id=${t}">\n            <i class="fa-solid fa-trash" style="color: #c71a34;"></i>\n            </a>\n            </td>\n            </tr>\n                    `,n.appendChild(c)}),a.appendChild(n),t.appendChild(a)}(await e.json())}()}))}();